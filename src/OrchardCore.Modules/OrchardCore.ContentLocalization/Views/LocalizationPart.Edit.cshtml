@using System.Globalization
@model LocalizationPartViewModel


<input asp-for="LocalizationSet" type="hidden" />

@if (!Model.SiteCultures.Any())
{
    <p>@T["Your site does not have any cultures yet. Current System culture is {0} | {1}", CultureInfo.InstalledUICulture.Name, CultureInfo.InstalledUICulture.DisplayName]</p>
    <p>@Html.ActionLink(T["Add or remove supported cultures for the site"].Value, "Culture", "Admin", new { area= "OrchardCore.Settings" } )</p>
}
else
{
    <fieldset class="form-group" asp-validation-class-for="Culture">
        <label asp-for="Culture">@T["Content Culture"]</label>
        <select asp-for="Culture" class="form-control">
            @foreach (var culture in Model.SiteCultures)
            {
                // only show the unlocalized cultures and the current culture
                if (string.IsNullOrEmpty(culture.ContentItem?.ContentItemId) || culture.ContentItem?.ContentItemId == Model.LocalizationPart.ContentItem.ContentItemId)
                {
                    <option value="@culture.Culture.Name" selected="@String.Equals(Model.Culture, culture.Culture.Name, StringComparison.OrdinalIgnoreCase)">
                        @culture.Culture.Name | @culture.Culture.DisplayName @if(culture.IsDeleted) { @T["Deleted"]}
                    </option>
                }
            }
        </select>
    </fieldset>


    <div class="form-group">
        <p>@T["Content Localization"]</p>
        @if (!string.IsNullOrEmpty(Model.LocalizationSet))
        {
            <ul>
                @foreach (var culture in Model.SiteCultures)
                {
                    <li>
                        @culture.Culture.Name | @culture.Culture.DisplayName -
                        @if (!string.IsNullOrEmpty(culture.ContentItem?.ContentItemId))
                        {
                            if (culture.ContentItem?.ContentItemId == Model.LocalizationPart.ContentItem.ContentItemId)
                            {
                                @T["Current Culture"];
                            }
                            else
                            {
                                <a class="btn btn-sm" asp-action="Edit" asp-controller="Admin" asp-route-area="OrchardCore.Contents" asp-route-contentItemId="@culture.ContentItem.ContentItemId" itemprop="UnsafeUrl">@T["Edit"]</a>
                            }
                            if (culture.IsDeleted)
                            {
                                <span>@T["Deleted"]</span>
                            }
                        }
                        else
                        {
                            <a class="btn btn-sm" asp-action="Localize" asp-controller="Admin" asp-route-area="OrchardCore.ContentLocalization" asp-route-contentItemId="@Model.LocalizationPart.ContentItem.ContentItemId" asp-route-targetCulture="@culture.Culture.Name" itemprop="UnsafeUrl">@T["Create"]</a>
                        }
                    </li>
                }
            </ul>
        }
        else
        {
            @T["Please save your content item before creating localizations"]
        }
        <p>@Html.ActionLink(T["Add or remove supported cultures for the site"].Value, "Culture", "Admin", new { area = "OrchardCore.Settings" })</p>

    </div>
}